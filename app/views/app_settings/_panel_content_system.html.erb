<%# SkyHopperが使う APIKey, Region, Keypair %>

<form class="form-horizontal" id="app-settings-form" role="form">

  <fieldset>
    <legend><%= t('app_settings.title.system') %></legend>
    <div class="form-group">
      <label for="log_directory" class="col-sm-3 control-label"><%= t 'app_settings.log_directory' %></label>
      <div class="col-sm-7">
        <input type="text" class="form-control" v-model="params.log_directory" value='/app/skyhopper/logs'  pattern="^[~/].+" readonly="true">
        <p class="help-block"><%= I18n.t('app_settings.msg.log_directory') %></p>
      </div>
      <label for="app_directory" class="col-sm-3 control-label"><%= t 'app_settings.app_directory' %></label>
      <div class="col-sm-7">
        <input type="text" class="form-control" value='/app/skyhopper' pattern="^[~/].+" readonly="true">
        <p class="help-block"><%= I18n.t('app_settings.msg.log_directory') %></p>
      </div>
    </div>
  </fieldset>


  <fieldset>
    <legend><%= t('app_settings.title.aws') %>&nbsp;<button type="button" class="btn btn-link" data-toggle="popover" title="AWS" data-content="<%= t('app_settings.msg.aws_description') %>"><%= glyphicon 'question-sign' %></button></legend>

    <div class="form-group">
      <label for="access_key" class="col-sm-3 control-label"><%= t 'app_settings.access_key' %></label>
      <div class="col-sm-7">
        <input type="text" class="form-control" v-model="params.access_key" pattern="[^\s]+" required>
        <p class="help-block"><%= t('app_settings.msg.access_key') %></p>
      </div>
    </div>

    <div class="form-group">
      <label for="secret_access_key" class="col-sm-3 control-label"><%= t 'app_settings.secret_access_key' %></label>
      <div class="col-sm-7">
        <input type="text" class="form-control form-control-masked" v-model="params.secret_access_key" pattern="[^\s]+" required>
        <p class="help-block"><%= t('app_settings.msg.secret_access_key') %></p>
      </div>
    </div>

    <div class="form-group">
      <label for="aws_region" class="col-sm-3 control-label"><%= t 'app_settings.aws_region' %></label>
      <div class="col-sm-7">
        <select class="form-control" v-model="params.aws_region" name="aws_region">
          <%= please_select_option %>
          <%= options_for_select(AWS::Regions) %>
        </select>
        <p class="help-block"><%= t('app_settings.msg.aws_region') %></p>
      </div>
    </div>

    <div class="form-group">
      <label class="col-sm-3 control-label"><%= t 'app_settings.aws_keypair' %></label>
      <div class="col-sm-7">
        <select class="form-control" v-model="key_select">
          <%= please_select_option %>
          <option value="0"> Create a new KeyPair </option>
          <option value="2"> Existing KeyPair </option>
        </select>
      </div>
      <label v-if="key_select == 0" class="col-sm-3 control-label"></label>
      <div class="col-sm-7" v-if="key_select == 0">
        <label for="keypair_name" class="control-label" v-if="params.keypair_name">{{params.keypair_name}}.pem</label>
        <button class="btn btn-sm btn-default" v-if="key_select"  :disabled="!keysExists" @click="create_key">Create & Download</button>
      </div>
      <label v-if="key_select == 2" class="col-sm-3 control-label"></label>
      <div class="col-sm-7" v-if="key_select == 2">
        <label for="keypair_name" class="control-label"><%= t 'app_settings.keypair_name' %></label>
        <input v-model="params.keypair_name" class="form-control ec2-private-key-name" type="text" name="keypair_name" required maxlength="255">
        <label for="keypair_value" class="control-label"><%= t 'app_settings.private_key' %></label>
        <textarea v-model="params.keypair_value" class="form-control ec2-private-key-value" name="keypair_value" placeholder="<%= t 'common.msg.key_droppable' %>" rows="5"></textarea>
        <p class="help-block"><%= t('app_settings.msg.aws_keypair') %></p>
      </div>
    </div>
  </fieldset>

</form>
